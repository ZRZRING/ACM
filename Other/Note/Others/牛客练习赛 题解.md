# A 和平天使

tag：贪心，思维

预估通过：99%

按照给定关系的左端点排序，每次贪心的介入最右边的点，模拟即可

# B 数数

tag: 筛质数。

预估通过：80%。

对 $1$ ~ $1e6$ 之内的数进行筛质数（埃式筛或线性筛），对于所有质数 $p$ 找出小于 $n$ 的 $p^m$ 的个数 $cnt$，答案为 $n - 1 - cnt$。

# C 奈乌部落

tag：背包 DP。

预估通过：50%。

如果我们把怪物分成两组，按打擂台赛模式进行对局（即每组派一个怪物上阵直到该怪物死亡），则最后活下来的怪物剩余的力量为两组怪物力量和的差值，用背包 dp 计算出怪物力量和的所有可能取值即可。

# D 移动棋子

tag：树，思维。

预估通过：30%。

记深度 $\geq i$ 的棋子个数为 $cnt_i$，深度 $i$ 的贡献为 $cnt_i + i - 1$，对所有深度求最大值。对 1 号点每个子树单独跑一遍该思路取最大值。

# D 移动棋子 完整题解

独立的考虑每一个棋子，肯定是能走的时候一定会走，如果说这一步别的棋子走了导致自己不能走了，那就等一会走。这样我们可以考虑贪心，答案就是每个棋子到 1 号点的距离加上等待的时间，在所有棋子里取最大值。如何计算每个棋子需要等待的时间，这个过程比较困难，如果我们用全局的角度考虑，可以得出一些结论。

一个棋子肯定会在某个时刻进入一个连通块，连通块里的所有棋子会连续不断的进入 1 号点，并且连通块会在某些点进行合并，一个连通块的贡献为该连通块首次有棋子进入 1 号点的某个儿子的时刻，加上整个连通块的点的数量。这样的话可以考虑全局瓶颈，因为是能走就走，根据已经推出来的结论，如果我们钦定深度最深的棋子畅通无阻，那么全局的瓶颈肯定是深度最深的棋子所在的连通块。因为 1 号点的特殊性，我们取所有 1 号点的儿子为关键节点，答案是所有关键节点的贡献的最大值。而关键节点的贡献就是，每个节点子树内深度最深的棋子到该关键点的距离加上该棋子所带领的连通块点的数量。

由已推出的结论可得这样是正确的，那么这个连通块的点的数量怎么计算呢。首先深度最深的棋子是畅通无阻的，也就是说我们只有该点深度的时间去把别的棋子移到 1 号点使得它不会堵住深度最深的那个点。要考虑整个过程有那些点不属于深度最深的棋子的连通块貌似有点困难，但是时间戳和点是一一对应的，所以我们考虑哪些时间戳会有点出去就好了。

于是 $\mathcal{O}(n)$ 的复杂度通过此题，其中代码实现有两种思路。

思路 1：贪心，能移动一定会移动。考虑对于 1 号点的每个儿子为根的子树进行考虑，显然次数的瓶颈在于深度最深的点，那么先让一个深度最深的点一直移动直到进入 1 号点，之后每个时刻都会有点进入 1 号点了。于是计算一下最深的深度 $d$，子树内点的数量 $c$，然后让某一个深度最深棋子畅通无阻得移动到 1 号点，计算这段时间内有棋子出去的时间戳数量，记为 $a$，一棵子树的贡献就是 $d + c - a$。对 1 号点的所有子树贡献取最大值即可。

思路 2：记深度 $\geq i$ 的棋子个数为 $cnt_i$，深度 $i$ 的贡献为 $cnt_i + i - 1$，对所有深度求最大值即可。依旧是对 1 号点每个子树单独跑一边取最大值。

# E Alice and Bod

tag：数据结构，hash

预估通过：10%

由于询问一个字符串是否对称，可以使用 $hash$ 维护，对于第二种操作，可以将字符串放到线段树上，但是由于有将一个字符由 $z$ 变为 $a$ 即带模意义下的加法，此时区间覆盖的懒标记不容易使用，但由于字符集合大小只有 $26$，可以直接存下这 $26$ 种在对应懒标记下的状态，由此解决区间覆盖。时间复杂度 $O(26nlogn)$

# F MAX

tag：数据结构，思维，树

预估通过：3%

对于一次询问即为某个节点即其子树中和深度不大于某个值的所有节点的权值的最大值，我们对层数建立可持久化线段树维护区间最大值，由此可以限制深度这一维，使用树上DFS序，限制子树这一维，由此即可回答询问。对于每一次的操作二我们可以知道在此次操作树上的信息是已经更新到深度 $t$ 即以上，同时维护操作三的次数，最终我们可以维护出每次询问的限制深度。